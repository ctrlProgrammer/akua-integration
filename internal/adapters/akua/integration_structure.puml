@startuml Integration Structure

title Akua Project - Integration Architecture

skinparam componentStyle rectangle
skinparam linetype ortho
skinparam backgroundColor #FFFFFF
skinparam package {
    BackgroundColor<<Layer>> #E8F4F8
    BorderColor<<Layer>> #4A90E2
}
skinparam component {
    BackgroundColor #F5F5F5
    BorderColor #333333
}

package "Domain Layer" <<Layer>> {
    rectangle "Business Domain" as DomainGroup {
        [authorization] as AuthDomain
        [commerce] as CommerceDomain
        [organization] as OrgDomain
        [payment] as PaymentDomain
        [instruments] as InstrumentDomain
    }
}

package "Adapter Layer" <<Layer>> {
    rectangle "Akua Adapters" as AdapterGroup {
        [AuthorizationProvider] as AuthAdapter
        [CommerceProvider] as CommerceAdapter
        [OrganizationProvider] as OrgAdapter
        [PaymentsProvider] as PaymentAdapter
    }
    
    [akua.Client] as Client #FFE6CC
    note right of Client
        **Shared Infrastructure**
        • HTTP Client
        • JWT Token Management
        • OAuth Authentication
    end note
}

cloud "Akua API" #E8F4F8 {
    [REST API\n/v1/authorizations\n/v1/payments\n/v1/merchants\n/v1/organizations] as AkuaAPI
}

' Domain to Adapter - Implementation
AuthDomain ..|> AuthAdapter : implements
CommerceDomain ..|> CommerceAdapter : implements
OrgDomain ..|> OrgAdapter : implements
PaymentDomain ..|> PaymentAdapter : implements

' Shared dependencies
InstrumentDomain ..> AuthAdapter : uses
PaymentDomain ..> AuthAdapter : uses

' Adapters use Client
AuthAdapter --> Client
CommerceAdapter --> Client
OrgAdapter --> Client
PaymentAdapter --> Client

' Client communicates with API
Client --> AkuaAPI : HTTP + JWT\nAuthentication

' Adapters call API endpoints
AuthAdapter ..> AkuaAPI : /v1/authorizations
CommerceAdapter ..> AkuaAPI : /v1/merchants
OrgAdapter ..> AkuaAPI : /v1/organizations
PaymentAdapter ..> AkuaAPI : /v1/payments

legend right
    |= Symbol |= Meaning |
    | **..|>** | Implements interface |
    | **-->** | Uses/Dependency |
    | **..>** | References/Uses |
endlegend

@enduml

